<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profit Tracker & Invoices</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/workflow-styles.css">
    <link rel="stylesheet" href="css/hero-section.css">
    <link rel="stylesheet" href="css/dashboard-enhanced.css">
    <link rel="stylesheet" href="css/calendar-day-view.css">
    <link rel="stylesheet" href="css/journal-modal.css">
</head>
<body>
    <!-- Elegant Background -->
    <div class="elegant-bg">
        <div class="elegant-grid"></div>
    </div>

    <!-- Top Header Bar -->
    <header class="dashboard-header elegant-header">
        <div class="header-left">
            <div class="elegant-logo">
                <div class="logo-icon">EHA</div>
                <div class="logo-text">
                    <h1>Business Manager</h1>
                    <span class="subtitle">Professional Dashboard</span>
                </div>
            </div>
            
            <!-- Player Profile -->
            <div class="player-profile">
                <div class="player-avatar">
                    <div class="avatar-circle">
                        <span class="avatar-level" id="player-level">1</span>
                    </div>
                    <div class="player-info">
                        <div class="player-name">CEO</div>
                        <div class="player-title" id="player-title">Startup Founder</div>
                    </div>
                </div>
                <div class="xp-bar">
                    <div class="xp-fill" id="xp-fill" style="width: 0%"></div>
                    <span class="xp-text" id="xp-text">0/100 XP</span>
                </div>
            </div>
            <button class="btn-elegant" title="Refresh" onclick="window.location.reload()">
                <span class="btn-icon">‚Üª</span>
            </button>
        </div>
        <div class="header-right">
            <div class="scheduler-dropdown">
                <button class="btn-elegant" id="smart-scheduler-btn" title="Smart scheduling">
                    <span class="btn-text">Scheduler</span>
                    <span class="btn-icon">‚ñº</span>
                </button>
                <div class="dropdown-menu" id="scheduler-dropdown-menu">
                    <button class="dropdown-item" id="macro-scheduler-btn">
                        <span class="btn-text">Macro Planning</span>
                        <small>Long-term scheduling</small>
                    </button>
                    <button class="dropdown-item" id="micro-scheduler-btn">
                        <span class="btn-text">Daily Logging</span>
                        <small>Field service tracking</small>
                    </button>
                </div>
            </div>
            <button class="btn-elegant" id="profit-tracker-btn" title="Track revenue and expenses">
                <span class="btn-text">Profit Tracker</span>
            </button>
            <button class="btn-elegant" id="client-tracker-btn" title="View clients and prospects">
                <span class="btn-text">Clients</span>
            </button>
            <button class="btn-elegant" id="workflow-guide-btn" title="Learn the ideal workflow">
                <span class="btn-text">Workflow Guide</span>
            </button>
            <button class="btn-primary-elegant" id="daily-workflow-btn" title="Start your daily workflow">
                <span class="btn-text">üöÄ Daily Workflow</span>
            </button>
            <button class="btn-primary-elegant" id="new-invoice-btn" onclick="window.location.href='invoice.html'">
                <span class="btn-text">New Invoice</span>
            </button>
        </div>
    </header>

    <!-- Main Dashboard -->
    <main class="dashboard-main">
        <!-- HERO SECTION: Daily Workflow - The Core of Everything -->
        <section class="workflow-hero">
            <div class="workflow-hero-content">
                <div class="hero-badge">‚ú® START HERE GODDAMNIT ‚ú®</div>
                <h1 class="hero-title">Daily Business Workflow</h1>
                <p class="hero-subtitle">Your single source of truth. Input once, updates everywhere.</p>
                
                <button id="daily-journal-btn" class="hero-cta-button">
                    <span class="cta-icon">üìù</span>
                    <span class="cta-text">Log Today's Work</span>
                    <span class="cta-arrow">‚Üí</span>
                </button>
                
                <div class="workflow-features">
                    <div class="feature-pill">
                        <span class="pill-icon">üë•</span>
                        <span class="pill-text">Auto-creates Customers</span>
                    </div>
                    <div class="feature-pill">
                        <span class="pill-icon">üë∑</span>
                        <span class="pill-text">Tracks Employee Hours</span>
                    </div>
                    <div class="feature-pill">
                        <span class="pill-icon">üìÖ</span>
                        <span class="pill-text">Updates Calendar</span>
                    </div>
                    <div class="feature-pill">
                        <span class="pill-icon">üí∞</span>
                        <span class="pill-text">Calculates Labor Costs</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Workflow-Powered Business Dashboard -->
        <section class="business-overview">
            <div class="section-header">
                <h2>Business Intelligence</h2>
                <span class="powered-badge">‚ö° Powered by Workflow</span>
            </div>
            
            <!-- Key Metrics Grid -->
            <div class="stats-grid-enhanced">
                <div class="stat-card-enhanced">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">üë•</div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-customers-stat">0</div>
                        <div class="stat-label">Total Customers</div>
                        <div class="stat-sublabel" id="customers-this-week">+0 this week</div>
                    </div>
                </div>
                
                <div class="stat-card-enhanced">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">üë∑</div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-labor-hours-stat">0h</div>
                        <div class="stat-label">Labor Hours</div>
                        <div class="stat-sublabel" id="labor-this-week">+0h this week</div>
                    </div>
                </div>
                
                <div class="stat-card-enhanced">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">üìÖ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-journal-entries">0</div>
                        <div class="stat-label">Journal Entries</div>
                        <div class="stat-sublabel" id="entries-this-month">+0 this month</div>
                    </div>
                </div>
                
                <div class="stat-card-enhanced">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">üí∞</div>
                    <div class="stat-content">
                        <div class="stat-value" id="total-labor-cost-stat">$0</div>
                        <div class="stat-label">Total Labor Costs</div>
                        <div class="stat-sublabel" id="cost-this-week">+$0 this week</div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Insights -->
            <div class="quick-insights">
                <div class="insight-card">
                    <h4>üìä This Week's Summary</h4>
                    <div id="week-summary-content">
                        <div class="insight-row">
                            <span>Days Worked:</span>
                            <strong id="days-worked-week">0</strong>
                        </div>
                        <div class="insight-row">
                            <span>Average Hours/Day:</span>
                            <strong id="avg-hours-day">0</strong>
                        </div>
                        <div class="insight-row">
                            <span>Most Common Customer:</span>
                            <strong id="top-customer">--</strong>
                        </div>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h4>üéØ Employee Productivity</h4>
                    <div id="employee-productivity">
                        <div class="insight-row">
                            <span>Total Employees:</span>
                            <strong id="total-employees-count">0</strong>
                        </div>
                        <div class="insight-row">
                            <span>Top Performer:</span>
                            <strong id="top-employee">--</strong>
                        </div>
                        <div class="insight-row">
                            <span>Avg Cost/Hour:</span>
                            <strong id="avg-employee-cost">$0</strong>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Task & Calendar Management -->
        <section class="task-calendar-section">
            <div class="section-header">
                <h2>Task & Calendar</h2>
                <div class="calendar-nav">
                    <button class="btn-elegant" id="prev-month-hero">
                        <span class="btn-icon">‚Äπ</span>
                    </button>
                    <span id="current-month-year-hero">January 2025</span>
                    <button class="btn-elegant" id="next-month-hero">
                        <span class="btn-icon">‚Ä∫</span>
                    </button>
                    <button class="btn-elegant" id="today-btn-calendar-hero">
                        <span class="btn-text">Today</span>
                    </button>
                </div>
            </div>
            
            <!-- Two-Panel Layout -->
            <div class="task-calendar-container">
                <!-- Left Panel: Task List -->
                <div class="task-panel">
                    <div class="panel-header">
                        <h3>Tasks</h3>
                        <button class="btn-primary-elegant" id="add-task-btn">
                            <span class="btn-text">Add Task</span>
                        </button>
                    </div>
                    
                    <!-- Task Categories -->
                    <div class="task-categories">
                        <div class="category-section">
                            <h4 class="category-title">Billable Work</h4>
                            <div class="task-list" id="billable-tasks" data-category="billable">
                                <!-- Billable tasks will be added here -->
                            </div>
                        </div>
                        
                        <div class="category-section">
                            <h4 class="category-title">Sales & Prospecting</h4>
                            <div class="task-list" id="sales-tasks" data-category="sales">
                                <!-- Sales tasks will be added here -->
                            </div>
                        </div>
                        
                        <div class="category-section">
                            <h4 class="category-title">Admin & Planning</h4>
                            <div class="task-list" id="admin-tasks" data-category="admin">
                                <!-- Admin tasks will be added here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Right Panel: Calendar -->
                <div class="calendar-panel">
                    <div class="panel-header">
                        <h3>Calendar</h3>
                        <div class="calendar-stats">
                            <span class="stat-item">Tasks: <span id="scheduled-count">0</span></span>
                            <span class="stat-item">Hours: <span id="total-hours">0</span></span>
                            <span class="stat-item">Revenue: $<span id="total-revenue">0</span></span>
                        </div>
                    </div>
                    
                    <!-- Calendar Grid -->
                    <div class="calendar-grid-hero">
                <div class="calendar-header-hero">
                    <div class="day-header-hero">Sun</div>
                    <div class="day-header-hero">Mon</div>
                    <div class="day-header-hero">Tue</div>
                    <div class="day-header-hero">Wed</div>
                    <div class="day-header-hero">Thu</div>
                    <div class="day-header-hero">Fri</div>
                    <div class="day-header-hero">Sat</div>
                </div>
                <div class="calendar-days-hero" id="calendar-days-hero">
                    <!-- Calendar days will be populated here -->
                </div>
                    </div>
                </div>
                
                <!-- Trash Bin -->
                <div class="trash-bin" id="trash-bin">
                    <div class="trash-icon">üóëÔ∏è</div>
                    <span class="trash-label">Trash</span>
                    <div class="trash-count" id="trash-count">0</div>
                </div>
            </div>
        </section>


        <!-- Profit Tracker Section -->
        <section class="profit-tracker-section">
            <div class="section-header">
                <h2>Monthly Profit Tracker</h2>
                <div class="date-controls">
                    <button class="btn-secondary" id="prev-month">‚Äπ Previous</button>
                    <span id="current-month-year">January 2025</span>
                    <button class="btn-secondary" id="next-month">Next ‚Ä∫</button>
                </div>
            </div>
            
            <!-- Monthly Chart -->
            <div class="profit-chart-container">
                <canvas id="profit-chart" width="800" height="300"></canvas>
            </div>
            
            <!-- Monthly Summary Cards -->
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-label">This Month</div>
                    <div class="card-amount" id="this-month-total">$0.00</div>
                </div>
                <div class="summary-card">
                    <div class="card-label">Last Month</div>
                    <div class="card-amount" id="last-month-total">$0.00</div>
                </div>
                <div class="summary-card">
                    <div class="card-label">This Year</div>
                    <div class="card-amount" id="this-year-total">$0.00</div>
                </div>
                <div class="summary-card">
                    <div class="card-label">Total Invoices</div>
                    <div class="card-amount" id="total-invoices">0</div>
                </div>
            </div>
        </section>

        <!-- Invoice List Section -->
        <section class="invoice-list-section">
            <div class="section-header">
                <h2>All Invoices</h2>
                <div class="list-controls">
                    <input type="text" id="invoice-search" placeholder="Search invoices..." />
                    <select id="status-filter">
                        <option value="">All Status</option>
                        <option value="draft">Draft</option>
                        <option value="sent">Sent</option>
                        <option value="paid">Paid</option>
                        <option value="overdue">Overdue</option>
                    </select>
                    <select id="sort-by">
                        <option value="service-date">Service Date</option>
                        <option value="invoice-date">Invoice Date</option>
                        <option value="amount">Amount</option>
                        <option value="customer">Customer</option>
                    </select>
                </div>
            </div>
            
            <!-- Invoice Table -->
            <div class="invoice-table-container">
                <table class="invoice-table">
                    <thead>
                        <tr>
                            <th>Invoice #</th>
                            <th>Customer</th>
                            <th>Service Date</th>
                            <th>Invoice Date</th>
                            <th>Due Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="invoice-list-tbody">
                        <!-- Invoice rows will be populated here -->
                    </tbody>
                </table>
            </div>
            
            <!-- Empty State -->
            <div id="empty-state" class="empty-state" style="display: none;">
                <div class="empty-icon">üìÑ</div>
                <h3>No invoices yet</h3>
                <p>Create your first invoice to start tracking your profits</p>
                <button class="btn-primary" onclick="window.location.href='invoice.html'">+ Create Invoice</button>
            </div>
        </section>
    </main>

    <!-- Success Message -->
    <div id="success-message" class="success-message" style="display: none;">
        Invoice saved successfully!
    </div>

    <!-- Client & Job Tracker Modal -->
    <div id="client-tracker-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>Client & Job Tracker</h3>
                <button type="button" class="modal-close" id="close-client-tracker">&times;</button>
            </div>
            <div class="client-tracker-content">
                <!-- Tab Navigation -->
                <div class="tracker-tabs">
                    <button class="tab-btn active" id="clients-tab">Clients</button>
                    <button class="tab-btn" id="jobs-tab">Jobs</button>
                </div>

                <!-- Clients Tab Content -->
                <div id="clients-content" class="tab-content active">
                    <div class="client-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="total-clients">0</div>
                            <div class="stat-label">Total Clients</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="hot-prospects">0</div>
                            <div class="stat-label">Hot Prospects</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="needs-followup">0</div>
                            <div class="stat-label">Need Follow-up</div>
                        </div>
                    </div>
                    <div class="client-filters">
                        <input type="text" id="client-search" placeholder="Search clients...">
                        <select id="warmth-filter">
                            <option value="">All Warmth Levels</option>
                            <option value="hot">Hot (8-10)</option>
                            <option value="warm">Warm (5-7)</option>
                            <option value="cold">Cold (1-4)</option>
                        </select>
                        <select id="status-filter-clients">
                            <option value="">All Status</option>
                            <option value="client">Active Clients</option>
                            <option value="prospect">Prospects</option>
                        </select>
                        <button class="btn-primary" id="add-customer-btn">+ Add Customer</button>
                    </div>
                    <div class="client-list-container">
                        <table class="client-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Company</th>
                                    <th>Warmth</th>
                                    <th>Last Contact</th>
                                    <th>Recommendation</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="client-list-tbody">
                                <!-- Client rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Jobs Tab Content -->
                <div id="jobs-content" class="tab-content">
                    <div class="job-stats">
                        <div class="stat-card">
                            <div class="stat-number" id="total-jobs">0</div>
                            <div class="stat-label">Total Jobs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="active-jobs">0</div>
                            <div class="stat-label">Active Jobs</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="completed-jobs">0</div>
                            <div class="stat-label">Completed</div>
                        </div>
                    </div>
                    <div class="job-filters">
                        <input type="text" id="job-search" placeholder="Search jobs...">
                        <select id="job-status-filter">
                            <option value="">All Status</option>
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                            <option value="on-hold">On Hold</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <select id="job-client-filter">
                            <option value="">All Clients</option>
                        </select>
                        <button class="btn-primary" id="add-job-btn">+ Add Job</button>
                    </div>
                    <div class="job-list-container">
                        <table class="job-table">
                            <thead>
                                <tr>
                                    <th>Job Name</th>
                                    <th>Client</th>
                                    <th>Status</th>
                                    <th>Created</th>
                                    <th>Progress</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="job-list-tbody">
                                <!-- Job rows will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Revenue & Expense Tracker Modal -->
    <div id="profit-tracker-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>Daily Profit Tracker</h3>
                <button type="button" class="modal-close" id="close-profit-tracker">&times;</button>
            </div>
            <div class="profit-tracker-content">
                <!-- Date Selector -->
                <div class="date-selector">
                    <label for="tracker-date">Date:</label>
                    <input type="date" id="tracker-date" value="">
                    <button class="btn-secondary" id="today-btn">Today</button>
                    <button class="btn-secondary" id="add-entry-btn">+ Add Entry</button>
                </div>

                <!-- Daily Entry Form -->
                <div class="daily-entry-form" id="daily-entry-form" style="display: none;">
                    <h4>Daily Revenue & Expenses</h4>
                    <div class="entry-form-grid">
                        <div class="revenue-section">
                            <h5>üí∞ Revenue</h5>
                            <div class="entry-list" id="revenue-entries">
                                <!-- Revenue entries will be added here -->
                            </div>
                            <button class="btn-small" id="add-revenue-btn">+ Add Revenue</button>
                        </div>
                        
                        <div class="expense-section">
                            <h5>üí∏ Expenses</h5>
                            <div class="entry-list" id="expense-entries">
                                <!-- Expense entries will be added here -->
                            </div>
                            <button class="btn-small" id="add-expense-btn">+ Add Expense</button>
                        </div>
                    </div>
                    
                    <div class="daily-notes">
                        <label for="daily-notes">Daily Notes:</label>
                        <textarea id="daily-notes" rows="3" placeholder="Notes about purchases, charges, or other business activities..."></textarea>
                    </div>
                    
                    <div class="daily-summary">
                        <div class="summary-row">
                            <span>Total Revenue:</span>
                            <span id="daily-revenue-total">$0.00</span>
                        </div>
                        <div class="summary-row">
                            <span>Total Expenses:</span>
                            <span id="daily-expense-total">$0.00</span>
                        </div>
                        <div class="summary-row profit-row">
                            <span>Daily Profit:</span>
                            <span id="daily-profit">$0.00</span>
                        </div>
                    </div>
                    
                    <div class="entry-actions">
                        <button class="btn-cancel" id="cancel-daily-entry">Cancel</button>
                        <button class="btn-primary" id="save-daily-entry">Save Day</button>
                    </div>
                </div>

                <!-- Profit Visualization -->
                <div class="profit-visualization">
                    <div class="chart-controls">
                        <h4>Profit Trends</h4>
                        <div class="chart-filters">
                            <select id="chart-period">
                                <option value="week">Last 7 Days</option>
                                <option value="month">Last 30 Days</option>
                                <option value="quarter">Last 90 Days</option>
                            </select>
                            <button class="btn-small" id="refresh-chart">Refresh</button>
                        </div>
                    </div>
                    <div class="profit-chart-container">
                        <canvas id="profit-chart" width="800" height="400"></canvas>
                    </div>
                </div>

                <!-- Daily Entries List -->
                <div class="daily-entries-list">
                    <h4>Recent Entries</h4>
                    <div class="entries-table-container">
                        <table class="entries-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Revenue</th>
                                    <th>Expenses</th>
                                    <th>Profit</th>
                                    <th>Notes</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="entries-list-tbody">
                                <!-- Daily entries will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Modal -->
    <div id="calendar-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>üìÖ Appointment Calendar</h3>
                <button type="button" class="modal-close" id="close-calendar">&times;</button>
            </div>
            <div class="calendar-content">
                <!-- Calendar Navigation -->
                <div class="calendar-nav">
                    <button class="btn-secondary" id="prev-month">‚Äπ</button>
                    <h4 id="current-month-year">January 2025</h4>
                    <button class="btn-secondary" id="next-month">‚Ä∫</button>
                    <button class="btn-secondary" id="today-btn-calendar">Today</button>
                </div>

                <!-- Calendar Grid -->
                <div class="calendar-grid">
                    <div class="calendar-header">
                        <div class="day-header">Sun</div>
                        <div class="day-header">Mon</div>
                        <div class="day-header">Tue</div>
                        <div class="day-header">Wed</div>
                        <div class="day-header">Thu</div>
                        <div class="day-header">Fri</div>
                        <div class="day-header">Sat</div>
                    </div>
                    <div class="calendar-days" id="calendar-days">
                        <!-- Calendar days will be populated here -->
                    </div>
                </div>

                <!-- Appointment Modal -->
                <div id="appointment-modal" class="modal" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 id="appointment-modal-title">Schedule Appointment</h3>
                            <button type="button" class="modal-close" id="close-appointment-modal">&times;</button>
                        </div>
                        <form id="appointment-form">
                            <div class="form-group">
                                <label for="appointment-date">Date</label>
                                <input type="date" id="appointment-date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="appointment-client">Client</label>
                                <select id="appointment-client" required>
                                    <option value="">Select a client</option>
                                </select>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="start-time">Start Time</label>
                                    <input type="time" id="start-time" required>
                                </div>
                                <div class="form-group">
                                    <label for="end-time">End Time</label>
                                    <input type="time" id="end-time" required>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="appointment-color">Color</label>
                                <div class="color-picker">
                                    <label class="color-option">
                                        <input type="radio" name="appointment-color" value="blue" checked>
                                        <span class="color-circle blue"></span>
                                        Blue
                                    </label>
                                    <label class="color-option">
                                        <input type="radio" name="appointment-color" value="green">
                                        <span class="color-circle green"></span>
                                        Green
                                    </label>
                                    <label class="color-option">
                                        <input type="radio" name="appointment-color" value="orange">
                                        <span class="color-circle orange"></span>
                                        Orange
                                    </label>
                                    <label class="color-option">
                                        <input type="radio" name="appointment-color" value="purple">
                                        <span class="color-circle purple"></span>
                                        Purple
                                    </label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="appointment-notes">Notes</label>
                                <textarea id="appointment-notes" rows="3" placeholder="Additional notes about this appointment..."></textarea>
                            </div>
                            
                            <div class="modal-actions">
                                <button type="button" class="btn-cancel" id="cancel-appointment">Cancel</button>
                                <button type="submit" class="btn-primary" id="save-appointment">Save Appointment</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Smart Scheduler Modal -->
    <div id="smart-scheduler-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>üß† Smart Scheduler</h3>
                <button type="button" class="modal-close" id="close-smart-scheduler">&times;</button>
            </div>
            <div class="smart-scheduler-content">
                <!-- Setup Wizard -->
                <div id="setup-wizard" class="setup-wizard">
                    <div class="wizard-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="wizard-progress"></div>
                        </div>
                        <div class="progress-text">
                            <span id="current-step">1</span> of 6
                        </div>
                    </div>
                    
                    <div class="wizard-content">
                        <!-- Step 1: Monthly Profit Goal -->
                        <div class="wizard-step active" id="step-1">
                            <h4>üí∞ What's your monthly profit goal?</h4>
                            <p>This helps us calculate your daily revenue targets</p>
                            <div class="goal-options">
                                <label class="goal-option">
                                    <input type="radio" name="profit-goal" value="5000">
                                    <div class="option-card">
                                        <div class="option-amount">$5,000</div>
                                        <div class="option-desc">Getting Started</div>
                                    </div>
                                </label>
                                <label class="goal-option">
                                    <input type="radio" name="profit-goal" value="10000">
                                    <div class="option-card">
                                        <div class="option-amount">$10,000</div>
                                        <div class="option-desc">Growing Business</div>
                                    </div>
                                </label>
                                <label class="goal-option">
                                    <input type="radio" name="profit-goal" value="15000">
                                    <div class="option-card">
                                        <div class="option-amount">$15,000</div>
                                        <div class="option-desc">Established</div>
                                    </div>
                                </label>
                                <label class="goal-option">
                                    <input type="radio" name="profit-goal" value="20000">
                                    <div class="option-card">
                                        <div class="option-amount">$20,000+</div>
                                        <div class="option-desc">Scaling Up</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 2: Work Days -->
                        <div class="wizard-step" id="step-2">
                            <h4>üìÖ How many days do you work per week?</h4>
                            <p>We'll distribute your schedule across these days</p>
                            <div class="workday-options">
                                <label class="workday-option">
                                    <input type="radio" name="work-days" value="5">
                                    <div class="option-card">
                                        <div class="option-icon">üìù</div>
                                        <div class="option-title">5 Days</div>
                                        <div class="option-desc">Monday - Friday</div>
                                    </div>
                                </label>
                                <label class="workday-option">
                                    <input type="radio" name="work-days" value="6">
                                    <div class="option-card">
                                        <div class="option-icon">‚ö°</div>
                                        <div class="option-title">6 Days</div>
                                        <div class="option-desc">Monday - Saturday</div>
                                    </div>
                                </label>
                                <label class="workday-option">
                                    <input type="radio" name="work-days" value="7">
                                    <div class="option-card">
                                        <div class="option-icon">üî•</div>
                                        <div class="option-title">7 Days</div>
                                        <div class="option-desc">Full Week</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 3: Activity Types -->
                        <div class="wizard-step" id="step-3">
                            <h4>üéØ What are your main activity types?</h4>
                            <p>Select all that apply - we'll color-code your schedule</p>
                            <div class="activity-options">
                                <label class="activity-option">
                                    <input type="checkbox" name="activities" value="client-meetings">
                                    <div class="activity-card blue">
                                        <div class="activity-icon">ü§ù</div>
                                        <div class="activity-title">Client Meetings</div>
                                        <div class="activity-desc">Consultations, calls, presentations</div>
                                    </div>
                                </label>
                                <label class="activity-option">
                                    <input type="checkbox" name="activities" value="field-work">
                                    <div class="activity-card green">
                                        <div class="activity-icon">üîß</div>
                                        <div class="activity-title">Field Work</div>
                                        <div class="activity-desc">On-site services, installations</div>
                                    </div>
                                </label>
                                <label class="activity-option">
                                    <input type="checkbox" name="activities" value="admin">
                                    <div class="activity-card orange">
                                        <div class="activity-icon">üìã</div>
                                        <div class="activity-title">Admin Work</div>
                                        <div class="activity-desc">Paperwork, emails, planning</div>
                                    </div>
                                </label>
                                <label class="activity-option">
                                    <input type="checkbox" name="activities" value="prospecting">
                                    <div class="activity-card purple">
                                        <div class="activity-icon">üéØ</div>
                                        <div class="activity-title">Prospecting</div>
                                        <div class="activity-desc">Lead generation, networking</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 4: Working Hours -->
                        <div class="wizard-step" id="step-4">
                            <h4>‚è∞ What are your preferred working hours?</h4>
                            <p>We'll schedule your high-value activities during these times</p>
                            <div class="hours-options">
                                <label class="hours-option">
                                    <input type="radio" name="work-hours" value="8-5">
                                    <div class="option-card">
                                        <div class="option-time">8:00 AM - 5:00 PM</div>
                                        <div class="option-desc">Traditional Business Hours</div>
                                    </div>
                                </label>
                                <label class="hours-option">
                                    <input type="radio" name="work-hours" value="9-6">
                                    <div class="option-card">
                                        <div class="option-time">9:00 AM - 6:00 PM</div>
                                        <div class="option-desc">Slightly Later Start</div>
                                    </div>
                                </label>
                                <label class="hours-option">
                                    <input type="radio" name="work-hours" value="10-7">
                                    <div class="option-card">
                                        <div class="option-time">10:00 AM - 7:00 PM</div>
                                        <div class="option-desc">Late Start, Late Finish</div>
                                    </div>
                                </label>
                                <label class="hours-option">
                                    <input type="radio" name="work-hours" value="flexible">
                                    <div class="option-card">
                                        <div class="option-time">Flexible</div>
                                        <div class="option-desc">I adapt to client needs</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 5: Buffer Time -->
                        <div class="wizard-step" id="step-5">
                            <h4>‚è±Ô∏è How much buffer time between appointments?</h4>
                            <p>This prevents scheduling conflicts and allows for travel/prep time</p>
                            <div class="buffer-options">
                                <label class="buffer-option">
                                    <input type="radio" name="buffer-time" value="15">
                                    <div class="option-card">
                                        <div class="option-duration">15 minutes</div>
                                        <div class="option-desc">Quick transitions</div>
                                    </div>
                                </label>
                                <label class="buffer-option">
                                    <input type="radio" name="buffer-time" value="30">
                                    <div class="option-card">
                                        <div class="option-duration">30 minutes</div>
                                        <div class="option-desc">Comfortable spacing</div>
                                    </div>
                                </label>
                                <label class="buffer-option">
                                    <input type="radio" name="buffer-time" value="60">
                                    <div class="option-card">
                                        <div class="option-duration">1 hour</div>
                                        <div class="option-desc">Lots of breathing room</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 6: Schedule Duration -->
                        <div class="wizard-step" id="step-6">
                            <h4>üìÖ How long should this schedule run?</h4>
                            <p>Choose the duration for your generated schedule</p>
                            <div class="duration-options">
                                <label class="duration-option">
                                    <input type="radio" name="schedule-duration" value="7">
                                    <div class="option-card">
                                        <div class="option-duration">1 Week</div>
                                        <div class="option-desc">Quick planning</div>
                                    </div>
                                </label>
                                <label class="duration-option">
                                    <input type="radio" name="schedule-duration" value="14">
                                    <div class="option-card">
                                        <div class="option-duration">2 Weeks</div>
                                        <div class="option-desc">Short-term planning</div>
                                    </div>
                                </label>
                                <label class="duration-option">
                                    <input type="radio" name="schedule-duration" value="30">
                                    <div class="option-card">
                                        <div class="option-duration">1 Month</div>
                                        <div class="option-desc">Full month planning</div>
                                    </div>
                                </label>
                                <label class="duration-option">
                                    <input type="radio" name="schedule-duration" value="90">
                                    <div class="option-card">
                                        <div class="option-duration">3 Months</div>
                                        <div class="option-desc">Quarterly planning</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="wizard-actions">
                        <button type="button" class="btn-secondary" id="wizard-back" style="display: none;">‚Üê Back</button>
                        <button type="button" class="btn-primary" id="wizard-next">Next ‚Üí</button>
                        <button type="button" class="btn-primary" id="wizard-generate" style="display: none;">üöÄ Generate Schedule</button>
                    </div>
                </div>

                <!-- Generated Schedule -->
                <div id="generated-schedule" class="generated-schedule" style="display: none;">
                    <div class="schedule-header">
                        <h4>üéØ Your Smart Schedule</h4>
                        <p>Based on your preferences, here's your optimized 1-week schedule:</p>
                    </div>
                    
                    <div class="schedule-summary">
                        <div class="summary-item">
                            <div class="summary-label">Daily Revenue Target</div>
                            <div class="summary-value" id="daily-revenue-target">$0</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Work Days</div>
                            <div class="summary-value" id="work-days-summary">0</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Total Appointments</div>
                            <div class="summary-value" id="total-appointments">0</div>
                        </div>
                    </div>
                    
                    <div class="schedule-week" id="schedule-week">
                        <!-- Generated schedule will appear here -->
                    </div>
                    
                    <div class="schedule-actions">
                        <button type="button" class="btn-secondary" id="regenerate-schedule">üîÑ Regenerate</button>
                        <button type="button" class="btn-primary" id="save-schedule">üíæ Save to Calendar</button>
                        <button type="button" class="btn-secondary" id="edit-schedule">‚úèÔ∏è Edit Schedule</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Logging Wizard Modal -->
    <div id="daily-logging-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>üìù Daily Field Service Logging</h3>
                <button type="button" class="modal-close" id="close-daily-logging">&times;</button>
            </div>
            <div class="daily-logging-content">
                <!-- Date Selection -->
                <div class="date-selection-section">
                    <h4>üìÖ Select the date to log services for:</h4>
                    <div class="date-picker-container">
                        <input type="date" id="logging-date" class="date-input">
                        <button class="btn-secondary" id="today-logging-btn">Today</button>
                        <button class="btn-secondary" id="yesterday-logging-btn">Yesterday</button>
                    </div>
                </div>

                <!-- Service Entry Wizard -->
                <div id="service-entry-wizard" class="service-entry-wizard" style="display: none;">
                    <div class="wizard-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="logging-progress"></div>
                        </div>
                        <div class="progress-text">
                            <span id="logging-step">1</span> of 4
                        </div>
                    </div>

                    <div class="wizard-content">
                        <!-- Step 1: Customer Selection -->
                        <div class="wizard-step active" id="logging-step-1">
                            <h4>üë§ Who are you billing?</h4>
                            <p>Select the customer for this service</p>
                            <div class="customer-search">
                                <input type="text" id="customer-search" placeholder="Search customers...">
                            </div>
                            <div class="customer-list" id="customer-list">
                                <!-- Customers will be populated here -->
                            </div>
                        </div>

                        <!-- Step 2: Service Type -->
                        <div class="wizard-step" id="logging-step-2">
                            <h4>üîß What service did you provide?</h4>
                            <p>Select the type of field service</p>
                            <div class="service-type-options">
                                <label class="service-type-option">
                                    <input type="radio" name="service-type" value="installation">
                                    <div class="option-card">
                                        <div class="service-icon">üîß</div>
                                        <div class="service-title">Installation</div>
                                        <div class="service-desc">Equipment, systems, fixtures</div>
                                    </div>
                                </label>
                                <label class="service-type-option">
                                    <input type="radio" name="service-type" value="repair">
                                    <div class="option-card">
                                        <div class="service-icon">üî®</div>
                                        <div class="service-title">Repair</div>
                                        <div class="service-desc">Fix, troubleshoot, restore</div>
                                    </div>
                                </label>
                                <label class="service-type-option">
                                    <input type="radio" name="service-type" value="maintenance">
                                    <div class="option-card">
                                        <div class="service-icon">üõ†Ô∏è</div>
                                        <div class="service-title">Maintenance</div>
                                        <div class="service-desc">Regular upkeep, cleaning</div>
                                    </div>
                                </label>
                                <label class="service-type-option">
                                    <input type="radio" name="service-type" value="inspection">
                                    <div class="option-card">
                                        <div class="service-icon">üîç</div>
                                        <div class="service-title">Inspection</div>
                                        <div class="service-desc">Assessment, evaluation</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- Step 3: Team Members -->
                        <div class="wizard-step" id="logging-step-3">
                            <h4>üë• Who was on the job?</h4>
                            <p>Select team members who worked on this service</p>
                            <div class="employee-list">
                                <div class="employee-option">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="employees" value="self" checked>
                                        <span class="employee-name">Myself</span>
                                    </label>
                                </div>
                                <!-- Additional employees will be populated here -->
                            </div>
                            <div class="add-employee-section">
                                <button type="button" class="btn-small" id="add-employee-btn">+ Add Employee</button>
                            </div>
                        </div>

                        <!-- Step 4: Time & Details -->
                        <div class="wizard-step" id="logging-step-4">
                            <h4>‚è∞ Service Details</h4>
                            <p>Enter timing and additional information</p>
                            <div class="service-details">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="start-time-logging">Start Time</label>
                                        <input type="time" id="start-time-logging" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="end-time-logging">End Time</label>
                                        <input type="time" id="end-time-logging" required>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="service-description">Service Description</label>
                                    <textarea id="service-description" rows="3" placeholder="Describe what was done..."></textarea>
                                </div>
                                
                                <div class="form-group">
                                    <label for="service-amount">Service Amount</label>
                                    <input type="number" id="service-amount" step="0.01" placeholder="0.00">
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="wizard-actions">
                        <button type="button" class="btn-secondary" id="logging-back" style="display: none;">‚Üê Back</button>
                        <button type="button" class="btn-primary" id="logging-next">Next ‚Üí</button>
                        <button type="button" class="btn-primary" id="logging-save" style="display: none;">üíæ Save Service</button>
                    </div>
                </div>

                <!-- Service Summary -->
                <div id="service-summary" class="service-summary" style="display: none;">
                    <h4>üìã Services Logged Today</h4>
                    <div class="logged-services" id="logged-services">
                        <!-- Logged services will appear here -->
                    </div>
                    <div class="summary-actions">
                        <button type="button" class="btn-secondary" id="add-another-service">+ Add Another Service</button>
                        <button type="button" class="btn-primary" id="finish-logging">‚úÖ Finish Logging</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Task Modal -->
    <div id="add-task-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Add New Task</h3>
                <button type="button" class="modal-close" id="close-add-task">&times;</button>
            </div>
            <form id="add-task-form">
                <div class="form-group">
                    <label for="task-title">Task Title *</label>
                    <input type="text" id="task-title" required placeholder="e.g., Install HVAC system for John Smith">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-client">Client/Customer</label>
                        <select id="task-client">
                            <option value="">Select a client</option>
                            <!-- Client options will be populated here -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-job">Job</label>
                        <select id="task-job">
                            <option value="">Select a job (optional)</option>
                            <!-- Job options will be populated here -->
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-category">Category *</label>
                        <select id="task-category" required>
                            <option value="billable">üí∞ Billable Work</option>
                            <option value="sales">üéØ Sales & Prospecting</option>
                            <option value="admin">‚öôÔ∏è Admin & Planning</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="task-duration">Duration (hours)</label>
                        <input type="number" id="task-duration" step="0.5" min="0.5" max="24" placeholder="2.5">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-rate">Rate ($/hour)</label>
                        <input type="number" id="task-rate" step="0.01" placeholder="75.00">
                    </div>
                    <div class="form-group">
                        <label for="task-total">Total Amount</label>
                        <input type="number" id="task-total" step="0.01" placeholder="187.50" readonly>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="task-description">Description</label>
                    <textarea id="task-description" rows="3" placeholder="Additional details about this task..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancel-add-task">Cancel</button>
                    <button type="submit" class="btn-primary neural-primary" id="save-task">üíæ Add Task</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div id="add-customer-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë§ Add New Customer</h3>
                <button type="button" class="modal-close" id="close-add-customer">&times;</button>
            </div>
            <form id="add-customer-form">
                <div class="form-group">
                    <label for="customer-name">Full Name *</label>
                    <input type="text" id="customer-name" required placeholder="Enter customer's full name">
                </div>
                
                <div class="form-group">
                    <label for="customer-company">Company</label>
                    <input type="text" id="customer-company" placeholder="Enter company name (optional)">
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="customer-email">Email</label>
                        <input type="email" id="customer-email" placeholder="customer@example.com">
                    </div>
                    <div class="form-group">
                        <label for="customer-phone">Phone</label>
                        <input type="tel" id="customer-phone" placeholder="(555) 123-4567">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="customer-address">Address</label>
                    <textarea id="customer-address" rows="3" placeholder="Street address, city, state, zip"></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="customer-warmth">Warmth Score</label>
                        <select id="customer-warmth">
                            <option value="5">5 - Neutral</option>
                            <option value="6">6 - Warm</option>
                            <option value="7">7 - Warm</option>
                            <option value="8">8 - Hot</option>
                            <option value="9">9 - Hot</option>
                            <option value="10">10 - Very Hot</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="customer-status">Status</label>
                        <select id="customer-status">
                            <option value="prospect">Prospect</option>
                            <option value="client">Active Client</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="customer-notes">Notes</label>
                    <textarea id="customer-notes" rows="3" placeholder="Any additional notes about this customer..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancel-add-customer">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-customer">üíæ Save Customer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Job Modal -->
    <div id="add-job-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üîß Add New Job</h3>
                <button type="button" class="modal-close" id="close-add-job">&times;</button>
            </div>
            <form id="add-job-form">
                <div class="form-group">
                    <label for="job-name">Job Name *</label>
                    <input type="text" id="job-name" required placeholder="Enter job name (e.g., HVAC Installation)">
                </div>
                
                <div class="form-group">
                    <label for="job-client">Client *</label>
                    <select id="job-client" required>
                        <option value="">Select a client</option>
                        <!-- Client options will be populated here -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="job-description">Description</label>
                    <textarea id="job-description" rows="3" placeholder="Describe the job details..."></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="job-status">Status</label>
                        <select id="job-status">
                            <option value="active">Active</option>
                            <option value="completed">Completed</option>
                            <option value="on-hold">On Hold</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="job-priority">Priority</label>
                        <select id="job-priority">
                            <option value="low">Low</option>
                            <option value="medium">Medium</option>
                            <option value="high">High</option>
                            <option value="urgent">Urgent</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="job-start-date">Start Date</label>
                        <input type="date" id="job-start-date">
                    </div>
                    <div class="form-group">
                        <label for="job-end-date">End Date</label>
                        <input type="date" id="job-end-date">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="job-estimated-hours">Estimated Hours</label>
                        <input type="number" id="job-estimated-hours" step="0.5" min="0" placeholder="8">
                    </div>
                    <div class="form-group">
                        <label for="job-hourly-rate">Hourly Rate ($)</label>
                        <input type="number" id="job-hourly-rate" step="0.01" min="0" placeholder="75.00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="job-notes">Notes</label>
                    <textarea id="job-notes" rows="3" placeholder="Any additional notes about this job..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancel-add-job">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-job">üíæ Save Job</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Workflow Guide Modal -->
    <div id="workflow-guide-modal" class="modal" style="display: none;">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>üöÄ Ideal Workflow Guide</h3>
                <button type="button" class="modal-close" id="close-workflow-guide">&times;</button>
            </div>
            <div class="workflow-guide-content">
                <!-- Progress Indicator -->
                <div class="workflow-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="workflow-progress-fill" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">
                        <span id="current-workflow-step">1</span> of 6
                    </div>
                </div>

                <!-- Workflow Steps -->
                <div class="workflow-steps">
                    <!-- Step 1: Setup -->
                    <div class="workflow-step active" id="workflow-step-1">
                        <div class="step-header">
                            <div class="step-number">1</div>
                            <h4>üéØ Initial Setup</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Welcome to your business management system!</strong> Let's set up your workflow for maximum efficiency.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">üë§</div>
                                    <div class="action-text">
                                        <strong>Add Your First Client</strong>
                                        <p>Click "Clients" ‚Üí "Add Customer" to create your client database</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('add-client')">Start Here</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Client Management -->
                    <div class="workflow-step" id="workflow-step-2">
                        <div class="step-header">
                            <div class="step-number">2</div>
                            <h4>üë• Client Management</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Build your client base</strong> and track relationship warmth for better sales.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">üìä</div>
                                    <div class="action-text">
                                        <strong>Track Client Warmth</strong>
                                        <p>Rate clients 1-10 (1=cold, 10=hot prospect)</p>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üìÖ</div>
                                    <div class="action-text">
                                        <strong>Follow-up Reminders</strong>
                                        <p>System shows when to contact clients based on warmth</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Job Creation -->
                    <div class="workflow-step" id="workflow-step-3">
                        <div class="step-header">
                            <div class="step-number">3</div>
                            <h4>üîß Job Creation</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Create jobs for your clients</strong> to organize your work effectively.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">‚ûï</div>
                                    <div class="action-text">
                                        <strong>Add Jobs</strong>
                                        <p>Click "Clients" ‚Üí "Jobs" tab ‚Üí "Add Job"</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('add-job')">Create Job</button>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üìã</div>
                                    <div class="action-text">
                                        <strong>Job Details</strong>
                                        <p>Include: name, client, description, estimated hours, hourly rate</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 4: Task Management -->
                    <div class="workflow-step" id="workflow-step-4">
                        <div class="step-header">
                            <div class="step-number">4</div>
                            <h4>üìã Task Management</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Break jobs into tasks</strong> and track your daily work efficiently.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">‚ûï</div>
                                    <div class="action-text">
                                        <strong>Add Tasks</strong>
                                        <p>Click "Add Task" ‚Üí Select client and job from dropdowns</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('add-task')">Create Task</button>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üìÖ</div>
                                    <div class="action-text">
                                        <strong>Schedule Tasks</strong>
                                        <p>Drag tasks to calendar to schedule your work</p>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üí∞</div>
                                    <div class="action-text">
                                        <strong>Track Billable Hours</strong>
                                        <p>Set rates and categories (Billable, Sales, Admin)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 5: Daily Operations -->
                    <div class="workflow-step" id="workflow-step-5">
                        <div class="step-header">
                            <div class="step-number">5</div>
                            <h4>üìä Daily Operations</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Track your daily activities</strong> and maintain accurate records.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">üìù</div>
                                    <div class="action-text">
                                        <strong>Daily Logging</strong>
                                        <p>Click "Scheduler" ‚Üí "Daily Logging" to track field work</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('daily-logging')">Log Work</button>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üí∞</div>
                                    <div class="action-text">
                                        <strong>Profit Tracking</strong>
                                        <p>Click "Profit Tracker" to record daily revenue and expenses</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('profit-tracker')">Track Profit</button>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üìÖ</div>
                                    <div class="action-text">
                                        <strong>Smart Scheduling</strong>
                                        <p>Use "Scheduler" ‚Üí "Macro Planning" for automated scheduling</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('smart-scheduler')">Auto Schedule</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 6: Invoicing & Growth -->
                    <div class="workflow-step" id="workflow-step-6">
                        <div class="step-header">
                            <div class="step-number">6</div>
                            <h4>üíº Invoicing & Growth</h4>
                        </div>
                        <div class="step-content">
                            <p><strong>Generate invoices and grow your business</strong> with professional tools.</p>
                            <div class="step-actions">
                                <div class="action-item">
                                    <div class="action-icon">üìÑ</div>
                                    <div class="action-text">
                                        <strong>Create Invoices</strong>
                                        <p>Click "New Invoice" to bill completed work</p>
                                        <button class="btn-small" onclick="profitTracker.openWorkflowAction('create-invoice')">Create Invoice</button>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üìà</div>
                                    <div class="action-text">
                                        <strong>Track Growth</strong>
                                        <p>Monitor monthly profit trends and business metrics</p>
                                    </div>
                                </div>
                                <div class="action-item">
                                    <div class="action-icon">üéØ</div>
                                    <div class="action-text">
                                        <strong>Repeat & Scale</strong>
                                        <p>Follow this workflow daily to build a successful business</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="workflow-navigation">
                    <button type="button" class="btn-secondary" id="workflow-prev" style="display: none;">‚Üê Previous</button>
                    <div class="workflow-step-indicators">
                        <span class="step-indicator active" data-step="1"></span>
                        <span class="step-indicator" data-step="2"></span>
                        <span class="step-indicator" data-step="3"></span>
                        <span class="step-indicator" data-step="4"></span>
                        <span class="step-indicator" data-step="5"></span>
                        <span class="step-indicator" data-step="6"></span>
                    </div>
                    <button type="button" class="btn-primary" id="workflow-next">Next ‚Üí</button>
                    <button type="button" class="btn-primary" id="workflow-finish" style="display: none;">‚úÖ Complete Guide</button>
                </div>

                <!-- Daily Workflow Settings -->
                <div class="workflow-settings">
                    <div class="settings-item">
                        <label class="checkbox-label">
                            <input type="checkbox" id="daily-workflow-toggle">
                            <span class="checkmark"></span>
                            <span class="settings-text">
                                <strong>Auto-open Daily Workflow</strong>
                                <small>Automatically show this guide each day when you open the app</small>
                            </span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Management Modal -->
    <div id="employee-management-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë∑ Employee Management</h3>
                <button type="button" class="modal-close" id="close-employee-management">&times;</button>
            </div>
            
            <div class="employee-management-content">
                <p>Manage your employees and their hourly rates for automatic labor cost tracking.</p>
                
                <!-- Add Employee Form -->
                <div class="add-employee-form" style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4>Add New Employee</h4>
                    <div style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 10px; align-items: end;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="new-employee-name">Name</label>
                            <input type="text" id="new-employee-name" placeholder="Employee name" required>
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label for="new-employee-rate">Hourly Rate ($)</label>
                            <input type="number" id="new-employee-rate" step="0.01" min="0" placeholder="15.00" required>
                        </div>
                        <button type="button" class="btn-primary" id="save-new-employee">Add</button>
                    </div>
                </div>
                
                <!-- Employee List -->
                <div class="employee-list-section">
                    <h4>Current Employees</h4>
                    <div id="employees-list-display">
                        <!-- Employee list will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Business Journal Modal -->
    <div id="daily-journal-modal" class="modal" style="display: none;">
        <div class="modal-content" style="position: relative; max-height: 95vh; overflow-y: auto; margin: 2.5vh auto;">
            <div class="modal-header">
                <h3>üìù Daily Business Journal</h3>
                <button type="button" class="btn-secondary" id="manage-employees-btn" style="margin-right: 10px;" title="Manage employee rates">
                    üë∑ Manage Employees
                </button>
                <button type="button" class="modal-close" id="close-daily-journal">&times;</button>
            </div>
            <form id="daily-journal-form">
                <div class="form-group">
                    <label for="journal-date">Date:</label>
                    <input type="date" id="journal-date" required>
                </div>

                <div class="form-group">
                    <label for="num-customers">How many customers did you work with today?</label>
                    <input type="number" 
                           id="num-customers" 
                           min="1" 
                           max="10" 
                           placeholder="Enter number of customers"
                           style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; width: 150px; margin-bottom: 15px;">
                </div>
                
                <div class="form-group" id="customer-fields-container" style="display: none;">
                    <label>Who were your customers?</label>
                    <div id="customers-list" style="margin-bottom: 10px;">
                        <!-- Customer entries will be added here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="num-employees">How many employees were on site?</label>
                    <input type="number" 
                           id="num-employees" 
                           min="1" 
                           max="20" 
                           placeholder="Enter number of employees"
                           style="padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; width: 150px; margin-bottom: 15px;">
                </div>
                
                <div class="form-group" id="employee-fields-container" style="display: none;">
                    <label>Who was on site?</label>
                    <div id="onsite-employees-list" style="margin-bottom: 10px;">
                        <!-- Employee entries will be added here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="journal-description">Give a 1 sentence description of the day:</label>
                    <textarea id="journal-description" rows="3" required placeholder="Describe your day in one sentence..."></textarea>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" id="cancel-daily-journal">Cancel</button>
                    <button type="submit" class="btn-primary" id="save-daily-journal">üíæ Save</button>
                </div>
            </form>

            <!-- Journal Entries List -->
            <div class="journal-entries-section" style="margin-top: 30px; margin-bottom: 50px; padding-bottom: 20px;">
                <h4>Recent Journal Entries</h4>
                <div id="journal-entries-list" style="max-height: 300px; overflow-y: auto;">
                    <!-- Journal entries will be displayed here -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Full-Screen Calendar Day View Modal -->
    <div id="day-view-modal" class="modal" style="display: none;">
        <div class="day-view-container">
            <div class="day-view-header">
                <button class="day-view-close" id="close-day-view">&times;</button>
                <div class="day-view-title">
                    <h2 id="day-view-date">Monday, October 9, 2024</h2>
                    <div class="day-view-quick-stats">
                        <span class="stat-badge">üìÖ <span id="day-tasks-count">0</span> Tasks</span>
                        <span class="stat-badge">‚è∞ <span id="day-hours-count">0</span>h</span>
                        <span class="stat-badge">üí∞ $<span id="day-revenue-count">0</span></span>
                    </div>
                </div>
                <div class="day-view-actions">
                    <button class="btn-elegant" id="add-task-to-day">
                        <span class="btn-icon">+</span>
                        <span class="btn-text">Add Task</span>
                    </button>
                </div>
            </div>
            
            <div class="day-view-body">
                <!-- Timeline View -->
                <div class="day-timeline">
                    <div class="timeline-hours" id="timeline-hours">
                        <!-- Hours will be generated here -->
                    </div>
                </div>
                
                <!-- Tasks & Journal Entries -->
                <div class="day-content">
                    <!-- Journal Entries Section -->
                    <div class="day-section" id="day-journal-section">
                        <h3 class="section-title">
                            <span class="section-icon">üìù</span>
                            Daily Journal Entry
                        </h3>
                        <div id="day-journal-content" class="journal-display">
                            <!-- Journal entries will be displayed here -->
                        </div>
                    </div>
                    
                    <!-- Tasks Section -->
                    <div class="day-section" id="day-tasks-section">
                        <h3 class="section-title">
                            <span class="section-icon">‚úì</span>
                            Tasks & Activities
                        </h3>
                        <div id="day-tasks-list" class="tasks-list">
                            <!-- Tasks will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/journal-manager.js"></script>
    <script src="js/main.js"></script>
    <script src="js/virtual-keyboard.js"></script>
</body>
</html>